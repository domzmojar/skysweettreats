<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sky Sweet Treats | Online Order</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css?v=9">
    <link rel="icon" type="image/x-icon" href="images/logo.jpg">
</head>
<body>
    <header class="app-header">
        <div class="container header-flex">
            <img src="images/logo.jpg" alt="Sky Sweet Treats Logo" class="brand-logo" onerror="this.src='https://placehold.co/100x100?text=Sweet'">
            <div class="brand-text">
                <h1>Sky Sweet Treats</h1>
                <p>Make your day sweet with Sky Sweet Treats! Sky ang limit! ğŸ°âœ¨</p>
            </div>
        </div>
    </header>

    <div id="category-tabs" class="category-tabs"></div>

    <main class="container">
        <div id="menu-grid" class="menu-grid"></div>
    </main>

    <div class="floating-cart" id="open-cart-btn">
        <div class="cart-icon">ğŸ›’ <span id="cart-count" class="badge">0</span></div>
        <div class="cart-total">Total: <span id="float-total">â‚±0.00</span></div>
    </div>

    <!-- CART MODAL -->
    <div id="cart-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ›’ Your Order Cart</h2>
                <button onclick="closeModal('cart-modal')" class="close-btn">&times;</button>
            </div>
            <div id="cart-items" class="cart-items-container"></div>
            <div class="modal-footer">
                <div class="modal-total-display">Total Amount: <span id="modal-total">â‚±0.00</span></div>
                <button onclick="openCheckout()" class="btn-primary">â¡ï¸ Next: Payment & Delivery</button>
                <span class="back-to-menu-link" onclick="closeModal('cart-modal')">â• Add more items</span>
            </div>
        </div>
    </div>

    <!-- CHECKOUT MODAL -->
    <div id="checkout-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ’³ Checkout Details</h2>
                <button onclick="closeModal('checkout-modal')" class="close-btn">&times;</button>
            </div>
            
            <div class="checkout-body">
                <div class="option-group">
                    <label>ğŸšš Order Type:</label>
                    <select id="order-type" onchange="toggleDeliveryFields()">
                        <option value="Delivery" selected>ğŸ  Delivery</option>
                        <option value="Pick-Up">ğŸš— Pick-Up</option>
                    </select>
                </div>

                <div id="shipping-group" class="option-group">
                    <label>ğŸ“ Shipping Address</label>
                    <select id="shipping-address" onchange="updateShippingFee()"></select>
                </div>

                <div id="landmark-group" class="form-group">
                    <label>ğŸ—ºï¸ Landmark / Delivery Instructions <span style="color:var(--primary);">*</span></label>
                    <textarea id="customer-address" placeholder="e.g., Near church, landmark, specific directions" rows="2" required></textarea>
                </div>

                <div class="form-group">
                    <label>ğŸ‘¤ Full Name <span style="color:var(--primary);">*</span></label>
                    <input type="text" id="customer-name" placeholder="Juan Dela Cruz" required>
                </div>

                <div class="option-group">
                    <label>ğŸ’³ Mode of Payment:</label>
                    <select id="payment-method" onchange="toggleGcashInfo()">
                        <option value="COD">ğŸ’° COD (Cash on Delivery)</option>
                        <option value="COP">ğŸ’° COP (Cash on Pickup)</option>
                        <option value="GCASH">ğŸ“± GCash</option>
                    </select>
                </div>

                <div id="gcash-info" class="payment-info-box" style="display:none;">
                    <h4>ğŸ“± GCash Payment Instructions</h4>
                    <p><strong>ğŸ’³ GCash Number:</strong> 09264569430<br>
                       <strong>ğŸ‘¤ Account Name:</strong> K** M.</p>
                    <img src="images/qr-pay.jpg" id="qr-image-el" class="qr-image" alt="GCash QR Code" onerror="this.style.display='none'">
                    <button onclick="downloadQR()" class="btn-download-qr">ğŸ“¥ Download QR Code</button>
                    <div class="receipt-reminder">
                        âš ï¸ <strong>Important Reminder:</strong><br>
                        1. Send payment to the number above<br>
                        2. Take a screenshot of your payment receipt<br>
                        3. <strong>SEND THE SCREENSHOT</strong> when you send your order<br>
                        4. Order will only be processed after payment confirmation
                    </div>
                </div>

                <div class="order-summary-box">
                    <strong>ğŸ“‹ Final Order Summary:</strong>
                    <div id="final-summary-text"></div>
                    <div id="shipping-summary" style="margin-top:10px; padding-top:10px; border-top:1px dashed #ccc;"></div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button id="copy-details-btn" onclick="copyOrderDetails()" class="btn-secondary">ğŸ“‹ 1. Copy Order Details</button>
                <button id="messenger-btn" onclick="sendToMessenger()" class="btn-primary" style="margin-top:12px; background:#0084FF;">ğŸ“± 2. Send via Messenger</button>
                <span class="back-to-menu-link" onclick="closeModal('checkout-modal')">â†©ï¸ Go back to menu</span>
            </div>
        </div>
    </div>

    <div id="toast" class="toast"></div>
    <button class="admin-refresh-btn" onclick="forceStockRefresh()" title="Refresh Stock">ğŸ”„</button>

    <script src="app.js?v=9"></script>
</body>
</html>
